---
title: 'Using a Yubikey for SSH & Git signing'
date: 2024-10-04T17:33:54+09:00
# weight: 1
tags: ["Security", "Yubikey", "SSH", "Git"]
author: "Daniel Barnes"
showToc: true
TocOpen: false
draft: true
hidemeta: false
comments: false
description: "How to setup your yubikey for ssh & git signing"
canonicalURL: "https://canonical.url/to/page"
disableHLJS: true # to disable highlightjs
disableShare: false
disableHLJS: false
hideSummary: false
searchHidden: true
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: false
ShowWordCount: true
ShowRssButtonInSectionTermList: true
UseHugoToc: true
cover:
    image: "chatgpt_gen_yubikey_title_image.jpg" # image path/url
    responsiveImages: true
    alt: "" # alt text
    caption: "Generated by ChatGPT" # display caption under cover
    relative: true # when using page bundles set this to true
    hidden: false # only hide on current single page
editPost:
    URL: "https://github.com/dacbd/blog/content"
    Text: "Suggest Changes" # edit text
    appendFilePath: true # to append file path to Edit link
---


## Why yubikey

Why should you use a yubikey or any hardware security device to secure your ssh keys?

TLDR for me, there are two main reasons. Simple security and convenience.

Many software package managers like [npm and pip](https://www.google.com/search?q=pip+malware+stealing+ssh+keys) have been used in attacks, which target users ssh keys.
Using a yubikey there isn't a ssh key to steal, to me this is just simple security.

Convenience?! Yes, with a modern Macbook a USB-C Nano yubikey is a natural companion. Do you have your ssh keys setup in [AWS](), on servers running your hobby project, or on GitHub/Gitlab? Did you get a new work computer? Have an older mac you still use?
Now there is no need to setup a key per machine, you can securely have one you use everywhere. Just unplug from one and plug back into your next. Or if you want, setup one key a load it onto multiple yubikeys. You can securely setup your key once and not worry about updating it in all the places you might ssh to.



## Setting up your machine

If you have an old yubikey setup already, or you have a new computer its pretty easy to get things working again.

Pretty simply you can just run the following:
```bash
brew install wget \
    gnupg \
    pinentry-mac
```

Setup your `gpg.conf` / `gpg-agent.conf` [covered below](#preparing-for-ssh)
You can see the lastest settings I use in my [dotfiles.](https://github.com/dacbd/dotfiles/tree/main/.gnupg)
Now on your new computer download your existing(public) keys, ex: `wget https://github.com/dacbd.gpg`
Import them: `gpg --import dacbd.gpg`

Optionally make sure everything is fine:
```
gpg -k
gpg --card-status
```

And that's it, your new computer is ready to go with your yubikey!

## New Yubikey Setup

## Preparing for SSH

## Setup for Git Signing


yubikey

gnupg

ssh

git
